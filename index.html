<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
  <title>Tech SEO Master</title>
  
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0b1020">
  <link rel="apple-touch-icon" href="icon-192.png">

  <style>
    :root{
      --bg:#0b1020; --card:rgba(255,255,255,0.08);
      --text:#f0f0f0; --accent:#7c5cff; --ok:#00d2ff; --ng:#ff4757;
    }
    body {
      margin:0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: var(--bg); color: var(--text); overflow-x: hidden;
      -webkit-tap-highlight-color: transparent;
    }
    .app-container { max-width: 600px; margin: 0 auto; padding: 20px; min-height: 100vh; display: flex; flex-direction: column; }
    
    /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
    header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
    h1 { font-size: 20px; font-weight: 800; background: linear-gradient(to right, #7c5cff, #22c1c3); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 0; }
    
    /* ã‚«ãƒ¼ãƒ‰UI */
    .card {
      background: var(--card); border-radius: 24px; padding: 24px;
      backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
      transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
    }
    
    /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¤ãƒ³ */
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .slide-in { animation: slideIn 0.4s ease-out forwards; }

    /* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */
    .progress-track { height: 6px; background: rgba(255,255,255,0.1); border-radius: 10px; margin: 20px 0; overflow: hidden; }
    .progress-fill { height: 100%; background: var(--accent); width: 0%; transition: width 0.4s ease; }

    /* å•é¡Œæ–‡ */
    .question { font-size: 19px; font-weight: 700; line-height: 1.5; margin-bottom: 24px; min-height: 60px;}
    .tag { font-size: 11px; color: rgba(255,255,255,0.6); border: 1px solid rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 6px; vertical-align: middle; margin-right: 6px; }

    /* é¸æŠè‚¢ãƒœã‚¿ãƒ³ */
    .btn-option {
      width: 100%; text-align: left; padding: 18px; margin-bottom: 12px;
      background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px; color: var(--text); font-size: 15px; font-weight: 600;
      transition: all 0.2s; cursor: pointer; position: relative; overflow: hidden;
    }
    .btn-option:active { transform: scale(0.98); background: rgba(255,255,255,0.1); }
    
    /* æ­£è§£ãƒ»ä¸æ­£è§£ã®æ¼”å‡º */
    .btn-option.correct { background: rgba(0, 210, 255, 0.2); border-color: var(--ok); color: var(--ok); }
    .btn-option.wrong { background: rgba(255, 71, 87, 0.2); border-color: var(--ng); }
    
    /* è§£èª¬ã‚¨ãƒªã‚¢ */
    .explanation {
      display: none; background: rgba(0,0,0,0.3); padding: 16px; border-radius: 16px;
      margin-top: 20px; font-size: 14px; line-height: 1.6; border-left: 4px solid var(--accent);
    }
    .explanation.show { display: block; animation: slideIn 0.3s ease; }

    /* ãƒã‚¯ã‚¹ãƒˆãƒœã‚¿ãƒ³ */
    .btn-next {
      width: 100%; padding: 16px; margin-top: 20px; background: var(--accent); border: none;
      border-radius: 14px; color: #fff; font-weight: bold; font-size: 16px;
      display: none; cursor: pointer; box-shadow: 0 4px 15px rgba(124, 92, 255, 0.4);
    }

    /* ãƒ•ãƒƒã‚¿ãƒ¼ */
    footer { text-align: center; color: rgba(255,255,255,0.4); font-size: 12px; margin-top: auto; padding-top: 20px; }
  </style>
</head>
<body>

<div class="app-container">
  <header>
    <h1>Tech SEO Master</h1>
    <div style="font-size:13px; font-weight:bold; color:var(--accent);">Lv.1</div>
  </header>

  <div id="game-card" class="card slide-in">
    <div class="progress-track"><div id="progress" class="progress-fill"></div></div>
    
    <div id="q-meta" style="margin-bottom:8px;"></div>
    <div id="question" class="question">èª­ã¿è¾¼ã¿ä¸­...</div>
    
    <div id="options"></div>

    <div id="explanation" class="explanation"></div>
    <button id="btn-next" class="btn-next">æ¬¡ã®å•é¡Œã¸</button>
  </div>

  <footer>Â© 2026 Takuma Oka</footer>
</div>

<script>
// --- ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚µãƒ³ãƒ—ãƒ«ï¼šå®Ÿéš›ã¯å‰å›ã®100å•ã‚’ä½¿ã„ã¾ã™ï¼‰ ---
const QUESTIONS = [
  { id: 1, tags: ["Crawl"], q: "ã‚¯ãƒ­ãƒ¼ãƒ«ãƒã‚¸ã‚§ãƒƒãƒˆã®ç„¡é§„é£ã„ã«ãªã‚‹æœ€å¤§ã®è¦å› ã¯ï¼Ÿ", choices: ["ç”»åƒã‚µã‚¤ã‚ºãŒå¤§ãã„", "ç„¡é™ã«ç”Ÿæˆã•ã‚Œã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿URL", "CSSãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤šã„"], ans: 1, exp: "ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã‚ˆã‚‹é‡è¤‡URLã‚„ç„¡é™URLã¯ã€Googlebotã‚’è¿·ã‚ã›ã€é‡è¦ãªãƒšãƒ¼ã‚¸ã¸ã®åˆ°é”ã‚’é˜»å®³ã—ã¾ã™ã€‚" },
  { id: 2, tags: ["Index"], q: "noindexã‚¿ã‚°ãŒå…¥ã£ã¦ã„ã‚‹ãƒšãƒ¼ã‚¸ã¯ã€ã‚¯ãƒ­ãƒ¼ãƒ«ã•ã‚Œã‚‹ï¼Ÿ", choices: ["çµ¶å¯¾ã«ã•ã‚Œãªã„", "ã•ã‚Œã‚‹ï¼ˆå†…å®¹ã¯èª­ã¾ã‚Œã‚‹ï¼‰", "ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹"], ans: 1, exp: "noindexã¯ã€æ¤œç´¢çµæœã«å‡ºã•ãªã„ã€å‘½ä»¤ã§ã‚ã‚Šã€ã‚¯ãƒ­ãƒ¼ãƒ«è‡ªä½“ã¯è¡Œã‚ã‚Œã¾ã™ã€‚ã‚¯ãƒ­ãƒ¼ãƒ«æ‹’å¦ã«ã¯robots.txtã‚’ä½¿ã„ã¾ã™ã€‚" },
  { id: 3, tags: ["CWV"], q: "LCP (Largest Contentful Paint) ã®æ”¹å–„ã«æœ€ã‚‚åŠ¹ãã®ã¯ï¼Ÿ", choices: ["ç”»åƒã®åœ§ç¸®ã¨ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰", "JavaScriptã®å‰Šé™¤", "ãƒ•ã‚©ãƒ³ãƒˆã®å¤‰æ›´"], ans: 0, exp: "LCPã¯ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¡¨ç¤ºé€Ÿåº¦ã§ã™ã€‚ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒã®WebPåŒ–ã‚„PreloadãŒç›´æ¥åŠ¹ãã¾ã™ã€‚" }
];

let currentIdx = 0;
let score = 0;
const card = document.getElementById('game-card');

// --- PWAè¨­å®š ---
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./sw.js');
}

// --- ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯ ---
function loadQuestion() {
  const q = QUESTIONS[currentIdx];
  
  // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒªã‚»ãƒƒãƒˆ
  card.classList.remove('slide-in');
  void card.offsetWidth; // ãƒªãƒ•ãƒ­ãƒ¼å¼·åˆ¶
  card.classList.add('slide-in');

  // è¡¨ç¤ºæ›´æ–°
  document.getElementById('q-meta').innerHTML = `<span class="tag">${q.tags[0]}</span> <span style="font-size:12px;opacity:0.7">Q.${currentIdx+1}/${QUESTIONS.length}</span>`;
  document.getElementById('question').textContent = q.q;
  
  // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼
  document.getElementById('progress').style.width = `${(currentIdx / QUESTIONS.length) * 100}%`;

  // é¸æŠè‚¢ç”Ÿæˆ
  const optsDiv = document.getElementById('options');
  optsDiv.innerHTML = "";
  q.choices.forEach((choice, i) => {
    const btn = document.createElement('button');
    btn.className = "btn-option";
    btn.textContent = choice;
    btn.onclick = () => checkAnswer(i, q.ans, btn);
    optsDiv.appendChild(btn);
  });

  document.getElementById('explanation').className = "explanation";
  document.getElementById('btn-next').style.display = "none";
}

function checkAnswer(selected, correct, btn) {
  // ãƒãƒ—ãƒ†ã‚£ãƒƒã‚¯ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆã‚¹ãƒãƒ›ãŒãƒ–ãƒ«ãƒƒã¨éœ‡ãˆã‚‹ï¼‰
  if (navigator.vibrate) navigator.vibrate(15);

  const btns = document.querySelectorAll('.btn-option');
  btns.forEach(b => b.disabled = true); // é€£æ‰“é˜²æ­¢

  if (selected === correct) {
    btn.classList.add('correct');
    score++;
  } else {
    btn.classList.add('wrong');
    btns[correct].classList.add('correct'); // æ­£è§£ã‚’æ•™ãˆã‚‹
    if (navigator.vibrate) navigator.vibrate([30, 50, 30]); // ãƒ–ãƒ–ãƒ–ãƒƒã¨éœ‡ãˆã‚‹
  }

  // è§£èª¬è¡¨ç¤º
  const expDiv = document.getElementById('explanation');
  expDiv.innerHTML = "<strong>ğŸ’¡ è§£èª¬</strong><br>" + QUESTIONS[currentIdx].exp;
  expDiv.classList.add('show');

  // æ¬¡ã¸ãƒœã‚¿ãƒ³
  const nextBtn = document.getElementById('btn-next');
  nextBtn.textContent = (currentIdx === QUESTIONS.length - 1) ? "çµæœã‚’è¦‹ã‚‹" : "æ¬¡ã®å•é¡Œã¸";
  nextBtn.style.display = "block";
  nextBtn.onclick = nextQuestion;
}

function nextQuestion() {
  currentIdx++;
  if (currentIdx < QUESTIONS.length) {
    loadQuestion();
  } else {
    showResult();
  }
}

function showResult() {
  card.innerHTML = `
    <h2 style="text-align:center;">ğŸ‰ å®Œäº†ï¼</h2>
    <div style="font-size:40px; text-align:center; margin:20px 0;">${score} / ${QUESTIONS.length}</div>
    <p style="text-align:center; opacity:0.8;">ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼</p>
    <button class="btn-next" onclick="location.reload()" style="display:block;">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button>
  `;
}

// åˆæœŸåŒ–
window.onload = loadQuestion;
</script>
</body>
</html>
