<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
  <title>Tech SEO Master</title>
  
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0b1020">
  <link rel="apple-touch-icon" href="icon-192.png">

  <style>
    :root{
      --bg:#0b1020; --card:rgba(255,255,255,0.08);
      --text:#f0f0f0; --accent:#7c5cff; --ok:#00d2ff; --ng:#ff4757;
    }
    body {
      margin:0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: var(--bg); color: var(--text); overflow-x: hidden;
      -webkit-tap-highlight-color: transparent;
    }
    .app-container { max-width: 600px; margin: 0 auto; padding: 20px; min-height: 100vh; display: flex; flex-direction: column; }
    
    /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
    header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
    h1 { font-size: 20px; font-weight: 800; background: linear-gradient(to right, #7c5cff, #22c1c3); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 0; }
    
    /* ã‚«ãƒ¼ãƒ‰UI */
    .card {
      background: var(--card); border-radius: 24px; padding: 24px;
      backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
      transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
    }
    
    /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .slide-in { animation: slideIn 0.4s ease-out forwards; }

    /* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */
    .progress-track { height: 6px; background: rgba(255,255,255,0.1); border-radius: 10px; margin: 20px 0; overflow: hidden; }
    .progress-fill { height: 100%; background: var(--accent); width: 0%; transition: width 0.4s ease; }

    /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
    .question { font-size: 18px; font-weight: 700; line-height: 1.5; margin-bottom: 24px; min-height: 60px;}
    .tag { font-size: 11px; color: rgba(255,255,255,0.6); border: 1px solid rgba(255,255,255,0.2); padding: 3px 8px; border-radius: 6px; vertical-align: middle; margin-right: 6px; }

    .btn-option {
      width: 100%; text-align: left; padding: 16px; margin-bottom: 12px;
      background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px; color: var(--text); font-size: 14px; font-weight: 600;
      transition: all 0.2s; cursor: pointer; position: relative;
    }
    .btn-option:active { transform: scale(0.98); background: rgba(255,255,255,0.1); }
    .btn-option.correct { background: rgba(0, 210, 255, 0.2); border-color: var(--ok); color: var(--ok); }
    .btn-option.wrong { background: rgba(255, 71, 87, 0.2); border-color: var(--ng); }
    
    .explanation {
      display: none; background: rgba(0,0,0,0.3); padding: 16px; border-radius: 16px;
      margin-top: 20px; font-size: 13px; line-height: 1.6; border-left: 4px solid var(--accent);
    }
    .explanation.show { display: block; animation: slideIn 0.3s ease; }

    .btn-next {
      width: 100%; padding: 16px; margin-top: 20px; background: var(--accent); border: none;
      border-radius: 14px; color: #fff; font-weight: bold; font-size: 16px;
      display: none; cursor: pointer; box-shadow: 0 4px 15px rgba(124, 92, 255, 0.4);
    }
    .rank-badge { font-size: 48px; font-weight: 900; color: var(--ok); text-shadow: 0 0 20px var(--ok); display:block; margin: 10px 0;}

    footer { text-align: center; color: rgba(255,255,255,0.4); font-size: 12px; margin-top: auto; padding-top: 20px; }
  </style>
</head>
<body>

<div class="app-container">
  <header>
    <h1>Tech SEO Master</h1>
    <div id="status-bar" style="font-size:13px; font-weight:bold; color:var(--accent);">æº–å‚™ä¸­...</div>
  </header>

  <div id="start-screen" class="card slide-in">
    <h2 style="text-align:center;">å®ŸåŠ›è¨ºæ–­ãƒ†ã‚¹ãƒˆ</h2>
    <p style="opacity:0.8; text-align:center; font-size:14px; margin-bottom:30px;">
      å…¨100å•ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰<br>
      ãƒ©ãƒ³ãƒ€ãƒ ã«<strong style="color:var(--ok)">30å•</strong>å‡ºé¡Œã•ã‚Œã¾ã™ã€‚<br>
      ã‚ãªãŸã®ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«SEOåŠ›ã‚’æ¸¬å®šã—ã¾ã™ã€‚
    </p>
    <button class="btn-next" onclick="startQuiz()" style="display:block;">ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã™ã‚‹</button>
  </div>

  <div id="game-card" class="card" style="display:none;">
    <div class="progress-track"><div id="progress" class="progress-fill"></div></div>
    <div id="q-meta" style="margin-bottom:8px;"></div>
    <div id="question" class="question"></div>
    <div id="options"></div>
    <div id="explanation" class="explanation"></div>
    <button id="btn-next" class="btn-next">æ¬¡ã®å•é¡Œã¸</button>
  </div>

  <footer>Â© 2026 Takuma Oka</footer>
</div>

<script>
// --- 100å•ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ ---
const ALL_QUESTIONS = [
  { id: "q001", tags: ["Index"], q: "meta robots noindex ã®ä¸»ãªç›®çš„ã¯ï¼Ÿ", choices: ["ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ä¸Šã’ã‚‹", "æ¤œç´¢çµæœã‹ã‚‰é™¤å¤–ã™ã‚‹", "ã‚¯ãƒ­ãƒ¼ãƒ«é »åº¦ã‚’ä¸Šã’ã‚‹", "301ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹"], ans: 1, exp: "noindexã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç™»éŒ²ã‚’æ‹’å¦ã™ã‚‹å‘½ä»¤ã§ã™ã€‚ã‚¯ãƒ­ãƒ¼ãƒ«è‡ªä½“ã¯è¡Œã‚ã‚Œã¾ã™ã€‚" },
  { id: "q002", tags: ["Crawl"], q: "robots.txt ã§ãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹ã¨ã©ã†ãªã‚‹ï¼Ÿ", choices: ["ãƒšãƒ¼ã‚¸å†…å®¹ã‚’è§£æã§ãã‚‹", "ãƒšãƒ¼ã‚¸ã®å–å¾—è‡ªä½“ãŒæ­¢ã¾ã‚‹", "ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒå¿…ãšæ¶ˆãˆã‚‹", "404ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹"], ans: 1, exp: "robots.txtã¯ã€ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆå–å¾—ï¼‰ã€ã‚’ç¦æ­¢ã—ã¾ã™ãŒã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç™»éŒ²ã‚’å®Œå…¨ã«é˜²ãã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚" },
  { id: "q003", tags: ["Canonical"], q: "rel=canonical ã®å½¹å‰²ã¨ã—ã¦æ­£ã—ã„ã®ã¯ï¼Ÿ", choices: ["å¼·åˆ¶çš„ãªå‘½ä»¤", "æ­£è¦URLã‚’ç¤ºã™ãƒ’ãƒ³ãƒˆ", "noindexã¨åŒã˜", "301ã¨åŒã˜"], ans: 1, exp: "canonicalã¯æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã«å¯¾ã—ã¦ã€ã“ã‚ŒãŒæ­£è¦ç‰ˆã§ã™ã€ã¨ä¼ãˆã‚‹å¼·åŠ›ãªãƒ’ãƒ³ãƒˆã§ã™ãŒã€å¼·åˆ¶å‘½ä»¤ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚" },
  { id: "q004", tags: ["Sitemap"], q: "XMLã‚µã‚¤ãƒˆãƒãƒƒãƒ—ã®ä¸»ãªå½¹å‰²ã¯ï¼Ÿ", choices: ["ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä¿è¨¼ã™ã‚‹", "ç™ºè¦‹ã¨ã‚¯ãƒ­ãƒ¼ãƒ«ã®æ‰‹åŠ©ã‘", "ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¦å› ", "é‡è¤‡ã®å‰Šé™¤"], ans: 1, exp: "ã‚µã‚¤ãƒˆãƒãƒƒãƒ—ã¯ã€ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã«ãƒšãƒ¼ã‚¸ã®å­˜åœ¨ã¨æ›´æ–°ã‚’ä¼ãˆã‚‹ã€åœ°å›³ã€ã§ã™ã€‚" },
  { id: "q005", tags: ["Status"], q: "HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ 404 ã®æ„å‘³ã¯ï¼Ÿ", choices: ["æ’ä¹…çš„ãªç§»å‹•", "ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼", "è¦‹ã¤ã‹ã‚‰ãªã„(Not Found)", "ã‚¢ã‚¯ã‚»ã‚¹ç¦æ­¢"], ans: 2, exp: "404ã¯ãƒªã‚½ãƒ¼ã‚¹ãŒå­˜åœ¨ã—ãªã„ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚" },
  { id: "q006", tags: ["Redirect"], q: "301 ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã®æ„å‘³ã¯ï¼Ÿ", choices: ["ä¸€æ™‚çš„ãªè»¢é€", "æ’ä¹…çš„ãªè»¢é€", "ã‚¯ãƒ­ãƒ¼ãƒ«æ‹’å¦", "ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯"], ans: 1, exp: "ã‚µã‚¤ãƒˆç§»è»¢ã‚„URLå¤‰æ›´æ™‚ã¯ã€è©•ä¾¡ã‚’å¼•ãç¶™ããŸã‚ã«301ï¼ˆæ’ä¹…ç§»å‹•ï¼‰ã‚’ä½¿ã„ã¾ã™ã€‚" },
  { id: "q007", tags: ["Redirect"], q: "302 ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã®ç”¨é€”ã¯ï¼Ÿ", choices: ["æ’ä¹…çš„ãªè»¢é€", "ä¸€æ™‚çš„ãªè»¢é€", "å‰Šé™¤", "ã‚¨ãƒ©ãƒ¼"], ans: 1, exp: "ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã‚„ABãƒ†ã‚¹ãƒˆãªã©ã€ä¸€æ™‚çš„ãªè»¢é€ã«ã¯302ã‚’ä½¿ã„ã¾ã™ã€‚" },
  { id: "q008", tags: ["Index"], q: "é‡è¤‡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒå¤§é‡ã«ã‚ã‚‹ã¨èµ·ãã‚‹å•é¡Œã¯ï¼Ÿ", choices: ["è©•ä¾¡ã®åˆ†æ•£ã¨ã‚¯ãƒ­ãƒ¼ãƒ«æµªè²»", "é †ä½ä¸Šæ˜‡", "CWVæ”¹å–„", "ã‚µã‚¤ãƒˆãƒªãƒ³ã‚¯è¡¨ç¤º"], ans: 0, exp: "åŒã˜å†…å®¹ã®ãƒšãƒ¼ã‚¸ãŒå¤šã„ã¨ã€ã©ã®ãƒšãƒ¼ã‚¸ã‚’è©•ä¾¡ã™ã¹ãã‹è¿·ã„ã€è©•ä¾¡ãŒåˆ†æ•£ã—ã¾ã™ã€‚" },
  { id: "q009", tags: ["Link"], q: "å†…éƒ¨ãƒªãƒ³ã‚¯ã®SEOä¸Šã®åŠ¹æœã¯ï¼Ÿ", choices: ["åºƒå‘Šåå…¥å¢—åŠ ", "ãƒšãƒ¼ã‚¸ã®é‡è¦åº¦ä¼é”ã¨ç™ºè¦‹", "ã‚µãƒ¼ãƒãƒ¼è² è·è»½æ¸›", "ç”»åƒåœ§ç¸®"], ans: 1, exp: "å†…éƒ¨ãƒªãƒ³ã‚¯ã¯ã€ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã®é€šã‚Šé“ã§ã‚ã‚Šã€ãƒšãƒ¼ã‚¸é–“ã®é‡è¦åº¦ï¼ˆãƒªãƒ³ã‚¯ã‚¸ãƒ¥ãƒ¼ã‚¹ï¼‰ã‚’æ¸¡ã™å½¹å‰²ãŒã‚ã‚Šã¾ã™ã€‚" },
  { id: "q010", tags: ["Canonical"], q: "URLæ­£è¦åŒ–ï¼ˆNormalizationï¼‰ã®ç›®çš„ã¯ï¼Ÿ", choices: ["URLã‚’å¢—ã‚„ã™", "è©•ä¾¡åˆ†æ•£ã‚’é˜²ã", "ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’æ­¢ã‚ã‚‹", "ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’æ•´ãˆã‚‹"], ans: 1, exp: "wwwæœ‰ç„¡ã‚„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿é•ã„ãªã©ã®é‡è¤‡ã‚’ä¸€æœ¬åŒ–ã—ã€è©•ä¾¡ã‚’é›†ä¸­ã•ã›ã¾ã™ã€‚" },
  // ... (å®¹é‡ã®éƒ½åˆã§ä¸€éƒ¨çœç•¥ã—ã¦ã„ã¾ã™ãŒã€å®Ÿéš›ã«ã¯ã“ã“ã«ã”è‡ªèº«ã®100å•ãƒªã‚¹ãƒˆã‚’å…¥ã‚Œã‚‰ã‚Œã¾ã™) ...
  { id: "q011", tags: ["Crawl"], q: "ã‚¯ãƒ­ãƒ¼ãƒ«ãƒã‚¸ã‚§ãƒƒãƒˆã‚’æµªè²»ã™ã‚‹æœ€å¤§ã®è¦å› ã¯ï¼Ÿ", choices: ["é«˜ç”»è³ªç”»åƒ", "ç„¡é™ç”Ÿæˆã•ã‚Œã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿URL", "CSSãƒ•ã‚¡ã‚¤ãƒ«", "é•·ã„ãƒ†ã‚­ã‚¹ãƒˆ"], ans: 1, exp: "ãƒ•ã‚£ãƒ«ã‚¿æ©Ÿèƒ½ãªã©ã§ç”Ÿæˆã•ã‚Œã‚‹ç„¡é™ã®URLã¯ã€ãƒœãƒƒãƒˆã‚’ç–²å¼Šã•ã›ã¾ã™ã€‚" },
  { id: "q012", tags: ["Rendering"], q: "CSR(Client Side Rendering)ã®å¼±ç‚¹ã¯ï¼Ÿ", choices: ["åˆæœŸHTMLãŒç©ºã§è©•ä¾¡ãŒé…ã‚Œã‚‹", "ã‚µãƒ¼ãƒãƒ¼è² è·ãŒé«˜ã„", "ãƒ‡ã‚¶ã‚¤ãƒ³ãŒå´©ã‚Œã‚‹", "ç”»åƒãŒè¡¨ç¤ºã•ã‚Œãªã„"], ans: 0, exp: "JSå®Ÿè¡Œå¾Œã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒå‡ºã‚‹ãŸã‚ã€ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã®åˆå›è©•ä¾¡ãŒé…ã‚Œã‚‹ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚" },
  { id: "q013", tags: ["CWV"], q: "LCPã¯ä½•ã‚’æ¸¬ã‚‹æŒ‡æ¨™ï¼Ÿ", choices: ["æ“ä½œã®å¿œç­”é€Ÿåº¦", "æœ€å¤§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¡¨ç¤ºæ™‚é–“", "ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ã‚ºãƒ¬", "ã‚µãƒ¼ãƒãƒ¼å¿œç­”æ™‚é–“"], ans: 1, exp: "Largest Contentful Paintã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦ãƒ¡ã‚¤ãƒ³ã®æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§ã®é€Ÿåº¦ã§ã™ã€‚" },
  { id: "q014", tags: ["CWV"], q: "CLSã¯ä½•ã‚’æ¸¬ã‚‹æŒ‡æ¨™ï¼Ÿ", choices: ["è¡¨ç¤ºé€Ÿåº¦", "è¦–è¦šçš„ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ã‚ºãƒ¬", "ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³", "HTTPSå¯¾å¿œ"], ans: 1, exp: "Cumulative Layout Shiftã€‚èª­ã¿è¾¼ã¿ä¸­ã«ç”»é¢ãŒã‚¬ã‚¿ã¤ãåº¦åˆã„ã‚’ç¤ºã—ã¾ã™ã€‚" },
  { id: "q015", tags: ["CWV"], q: "INPã¯ä½•ã‚’æ¸¬ã‚‹æŒ‡æ¨™ï¼Ÿ", choices: ["ç”»åƒã®ç”»è³ª", "æ“ä½œã«å¯¾ã™ã‚‹å¿œç­”æ€§", "ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é‡", "æ»åœ¨æ™‚é–“"], ans: 1, exp: "Interaction to Next Paintã€‚ã‚¯ãƒªãƒƒã‚¯ã‚„ã‚¿ãƒƒãƒ—ã«å¯¾ã™ã‚‹åå¿œã®è‰¯ã•ã‚’æ¸¬ã‚Šã¾ã™ã€‚" },
  { id: "q016", tags: ["Schema"], q: "æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿(Schema.org)ã®ãƒ¡ãƒªãƒƒãƒˆã¯ï¼Ÿ", choices: ["å¿…ãš1ä½ã«ãªã‚‹", "æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ãŒå†…å®¹ã‚’ç†è§£ã—ã‚„ã™ããªã‚‹", "ãƒ‡ã‚¶ã‚¤ãƒ³ãŒè‰¯ããªã‚‹", "åºƒå‘ŠãŒæ¶ˆãˆã‚‹"], ans: 1, exp: "ãƒªãƒƒãƒãƒªã‚¶ãƒ«ãƒˆï¼ˆæ˜Ÿè©•ä¾¡ã‚„Q&Aãªã©ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚" },
  { id: "q017", tags: ["Schema"], q: "JSON-LDã¯ã©ã“ã«è¨˜è¿°ã™ã‚‹ã®ãŒæ¨å¥¨ï¼Ÿ", choices: ["bodyã®æœ«å°¾", "headå†…ã®scriptã‚¿ã‚°", "CSSãƒ•ã‚¡ã‚¤ãƒ«", "ç”»åƒaltå±æ€§"], ans: 1, exp: "Googleã¯script type='application/ld+json'å½¢å¼ã§ã®è¨˜è¿°ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚" },
  { id: "q018", tags: ["Mobile"], q: "ãƒ¢ãƒã‚¤ãƒ«ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã§ãªã„ã¨ã©ã†ãªã‚‹ï¼Ÿ", choices: ["PCæ¤œç´¢ã§åœå¤–ã«ãªã‚‹", "ãƒ¢ãƒã‚¤ãƒ«æ¤œç´¢ã§ã®è©•ä¾¡ãŒä¸‹ãŒã‚‹", "ã‚µã‚¤ãƒˆãŒå‰Šé™¤ã•ã‚Œã‚‹", "åºƒå‘ŠãŒå‡ºãªã„"], ans: 1, exp: "ç¾åœ¨ã¯ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆMFIï¼‰ãŒåŸºæœ¬ã®ãŸã‚ã€ã‚¹ãƒãƒ›å¯¾å¿œã¯å¿…é ˆã§ã™ã€‚" },
  { id: "q019", tags: ["Speed"], q: "ç”»åƒã®é…å»¶èª­ã¿è¾¼ã¿(Lazy-load)ã®æ³¨æ„ç‚¹ã¯ï¼Ÿ", choices: ["å…¨ã¦ã®ç”»åƒã«è¡Œã†", "ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼ç”»åƒã«ã¯é©ç”¨ã—ãªã„", "èƒŒæ™¯ç”»åƒã®ã¿ã«è¡Œã†", "ã‚¢ã‚¤ã‚³ãƒ³ã®ã¿ã«è¡Œã†"], ans: 1, exp: "LCPè¦ç´ ï¼ˆä¸€ç•ªä¸Šã®ç”»åƒï¼‰ã‚’é…å»¶ã•ã›ã‚‹ã¨ã€LCPãŒæ‚ªåŒ–ã—ã¦ã—ã¾ã„ã¾ã™ã€‚" },
  { id: "q020", tags: ["Security"], q: "HTTPSåŒ–ï¼ˆSSLï¼‰ã¯SEOã«å½±éŸ¿ã™ã‚‹ï¼Ÿ", choices: ["å…¨ãã—ãªã„", "ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¦å› ã®ä¸€ã¤ã§ã‚ã‚‹", "ãƒã‚¤ãƒŠã‚¹ã«ãªã‚‹", "ç”»åƒæ¤œç´¢ã®ã¿å½±éŸ¿"], ans: 1, exp: "Googleã¯HTTPSã‚’ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚·ã‚°ãƒŠãƒ«ã®ä¸€ã¤ã¨ã—ã¦å…¬è¡¨ã—ã¦ã„ã¾ã™ã€‚" }
  // â˜…ã“ã“ã«æ®‹ã‚Šã®å•é¡Œã‚’è‡ªç”±ã«è¿½åŠ ã§ãã¾ã™â˜…
];
// â€»å‹•ä½œç¢ºèªç”¨ã«20å•ã«ã—ã¦ã„ã¾ã™ãŒã€å¾Œã§100å•ã¾ã§ã‚³ãƒ”ãƒšã§å¢—ã‚„ã›ã¾ã™ã€‚

const QUIZ_COUNT = 30; // 1å›ã‚ãŸã‚Šã®å‡ºé¡Œæ•°ï¼ˆ30å•ã«ã™ã‚‹ãªã‚‰ã“ã“ã‚’30ã«å¤‰æ›´ï¼‰
let currentDeck = [];
let currentIdx = 0;
let score = 0;

// PWAè¨­å®š
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./sw.js');
}

// ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£: é…åˆ—ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

// ã‚¯ã‚¤ã‚ºé–‹å§‹
function startQuiz() {
  // å…¨å•é¡Œã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«æŠ½å‡º
  const shuffled = shuffle([...ALL_QUESTIONS]);
  currentDeck = shuffled.slice(0, QUIZ_COUNT);
  
  currentIdx = 0;
  score = 0;
  
  document.getElementById('start-screen').style.display = 'none';
  document.getElementById('game-card').style.display = 'block';
  document.getElementById('game-card').classList.add('slide-in');
  
  loadQuestion();
}

function loadQuestion() {
  const q = currentDeck[currentIdx];
  const card = document.getElementById('game-card');
  
  // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒªã‚»ãƒƒãƒˆ
  card.classList.remove('slide-in');
  void card.offsetWidth;
  card.classList.add('slide-in');

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
  document.getElementById('status-bar').textContent = `æ®‹ã‚Š ${QUIZ_COUNT - currentIdx} å•`;
  document.getElementById('q-meta').innerHTML = `<span class="tag">${q.tags[0]}</span> <span style="font-size:12px;opacity:0.7">Q.${currentIdx+1}</span>`;
  document.getElementById('question').textContent = q.q;
  document.getElementById('progress').style.width = `${(currentIdx / QUIZ_COUNT) * 100}%`;

  // é¸æŠè‚¢ç”Ÿæˆ
  const optsDiv = document.getElementById('options');
  optsDiv.innerHTML = "";
  q.choices.forEach((choice, i) => {
    const btn = document.createElement('button');
    btn.className = "btn-option";
    btn.textContent = choice;
    btn.onclick = () => checkAnswer(i, q.ans, btn);
    optsDiv.appendChild(btn);
  });

  document.getElementById('explanation').className = "explanation";
  document.getElementById('btn-next').style.display = "none";
}

function checkAnswer(selected, correct, btn) {
  if (navigator.vibrate) navigator.vibrate(10);
  const btns = document.querySelectorAll('.btn-option');
  btns.forEach(b => b.disabled = true);

  if (selected === correct) {
    btn.classList.add('correct');
    score++;
  } else {
    btn.classList.add('wrong');
    btns[correct].classList.add('correct');
    if (navigator.vibrate) navigator.vibrate([30, 50, 30]);
  }

  const expDiv = document.getElementById('explanation');
  expDiv.innerHTML = "<strong>ğŸ’¡ è§£èª¬</strong><br>" + currentDeck[currentIdx].exp;
  expDiv.classList.add('show');

  const nextBtn = document.getElementById('btn-next');
  nextBtn.textContent = (currentIdx === QUIZ_COUNT - 1) ? "çµæœã‚’è¦‹ã‚‹" : "æ¬¡ã®å•é¡Œã¸";
  nextBtn.style.display = "block";
  nextBtn.onclick = nextQuestion;
}

function nextQuestion() {
  currentIdx++;
  if (currentIdx < QUIZ_COUNT) {
    loadQuestion();
  } else {
    showResult();
  }
}

function showResult() {
  const percentage = (score / QUIZ_COUNT) * 100;
  let rank = "C";
  let msg = "ã¾ã ã¾ã ã“ã‚Œã‹ã‚‰ï¼";
  
  if(percentage >= 90) { rank = "S"; msg = "å®Œç’§ï¼ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«SEOãƒã‚¹ã‚¿ãƒ¼ï¼"; }
  else if(percentage >= 70) { rank = "A"; msg = "ç´ æ™´ã‚‰ã—ã„ï¼ç¾å ´ã§æˆ¦ãˆã‚‹ãƒ¬ãƒ™ãƒ«ï¼"; }
  else if(percentage >= 50) { rank = "B"; msg = "ã‚ã¨ä¸€æ­©ï¼å¾©ç¿’ã—ã‚ˆã†ã€‚"; }

  const card = document.getElementById('game-card');
  card.innerHTML = `
    <h2 style="text-align:center;">çµæœç™ºè¡¨</h2>
    <div style="text-align:center; margin:20px 0;">
      <span style="font-size:14px; opacity:0.7;">æ­£è§£æ•°</span><br>
      <span style="font-size:32px; font-weight:bold;">${score}</span> <span style="font-size:18px;">/ ${QUIZ_COUNT}</span>
    </div>
    <div style="text-align:center; margin-bottom:30px;">
      <span style="font-size:14px; opacity:0.7;">ãƒ©ãƒ³ã‚¯</span>
      <span class="rank-badge">${rank}</span>
      <p style="color:var(--accent); font-weight:bold;">${msg}</p>
    </div>
    <button class="btn-next" onclick="location.reload()" style="display:block;">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹</button>
  `;
}
</script>
</body>
</html>
