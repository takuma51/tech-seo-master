<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
  <title>Tech SEO Master</title>
  
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0b1020">
  <link rel="apple-touch-icon" href="icon-192.png">

  <style>
    :root{
      --bg:#0b1020; --card:rgba(255,255,255,0.08);
      --text:#f0f0f0; --accent:#7c5cff; --ok:#00d2ff; --ng:#ff4757;
    }
    body {
      margin:0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: var(--bg); color: var(--text); overflow-x: hidden;
      -webkit-tap-highlight-color: transparent;
    }
    .app-container { max-width: 600px; margin: 0 auto; padding: 20px; min-height: 100vh; display: flex; flex-direction: column; }
    
    /* ヘッダー */
    header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
    h1 { font-size: 20px; font-weight: 800; background: linear-gradient(to right, #7c5cff, #22c1c3); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 0; }
    
    /* カードUI */
    .card {
      background: var(--card); border-radius: 24px; padding: 24px;
      backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
      transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
    }
    
    /* アニメーション */
    @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .slide-in { animation: slideIn 0.4s ease-out forwards; }

    /* プログレスバー */
    .progress-track { height: 6px; background: rgba(255,255,255,0.1); border-radius: 10px; margin: 20px 0; overflow: hidden; }
    .progress-fill { height: 100%; background: var(--accent); width: 0%; transition: width 0.4s ease; }

    /* コンテンツ */
    .question { font-size: 18px; font-weight: 700; line-height: 1.5; margin-bottom: 24px; min-height: 60px;}
    .tag { font-size: 11px; color: rgba(255,255,255,0.6); border: 1px solid rgba(255,255,255,0.2); padding: 3px 8px; border-radius: 6px; vertical-align: middle; margin-right: 6px; }

    .btn-option {
      width: 100%; text-align: left; padding: 16px; margin-bottom: 12px;
      background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px; color: var(--text); font-size: 14px; font-weight: 600;
      transition: all 0.2s; cursor: pointer; position: relative;
    }
    .btn-option:active { transform: scale(0.98); background: rgba(255,255,255,0.1); }
    .btn-option.correct { background: rgba(0, 210, 255, 0.2); border-color: var(--ok); color: var(--ok); }
    .btn-option.wrong { background: rgba(255, 71, 87, 0.2); border-color: var(--ng); }
    
    .explanation {
      display: none; background: rgba(0,0,0,0.3); padding: 16px; border-radius: 16px;
      margin-top: 20px; font-size: 13px; line-height: 1.6; border-left: 4px solid var(--accent);
    }
    .explanation.show { display: block; animation: slideIn 0.3s ease; }

    .btn-next {
      width: 100%; padding: 16px; margin-top: 20px; background: var(--accent); border: none;
      border-radius: 14px; color: #fff; font-weight: bold; font-size: 16px;
      display: none; cursor: pointer; box-shadow: 0 4px 15px rgba(124, 92, 255, 0.4);
    }
    .rank-badge { font-size: 48px; font-weight: 900; color: var(--ok); text-shadow: 0 0 20px var(--ok); display:block; margin: 10px 0;}

    footer { text-align: center; color: rgba(255,255,255,0.4); font-size: 12px; margin-top: auto; padding-top: 20px; }
  </style>
</head>
<body>

<div class="app-container">
  <header>
    <h1>Tech SEO Master</h1>
    <div id="status-bar" style="font-size:13px; font-weight:bold; color:var(--accent);">準備中...</div>
  </header>

  <div id="start-screen" class="card slide-in">
    <h2 style="text-align:center;">実力診断テスト</h2>
    <p style="opacity:0.8; text-align:center; font-size:14px; margin-bottom:30px;">
      全100問のデータベースから<br>
      ランダムに<strong style="color:var(--ok)">30問</strong>出題されます。<br>
      あなたのテクニカルSEO力を測定します。
    </p>
    <button class="btn-next" onclick="startQuiz()" style="display:block;">テストを開始する</button>
  </div>

  <div id="game-card" class="card" style="display:none;">
    <div class="progress-track"><div id="progress" class="progress-fill"></div></div>
    <div id="q-meta" style="margin-bottom:8px;"></div>
    <div id="question" class="question"></div>
    <div id="options"></div>
    <div id="explanation" class="explanation"></div>
    <button id="btn-next" class="btn-next">次の問題へ</button>
  </div>

  <footer>© 2026 Takuma Oka</footer>
</div>

<script>
// --- 100問のデータベース ---
const ALL_QUESTIONS = [
  { id: "q001", tags: ["Index"], q: "meta robots noindex の主な目的は？", choices: ["ランキングを上げる", "検索結果から除外する", "クロール頻度を上げる", "301リダイレクトする"], ans: 1, exp: "noindexはインデックス登録を拒否する命令です。クロール自体は行われます。" },
  { id: "q002", tags: ["Crawl"], q: "robots.txt でブロックするとどうなる？", choices: ["ページ内容を解析できる", "ページの取得自体が止まる", "インデックスが必ず消える", "404エラーになる"], ans: 1, exp: "robots.txtは『クロール（取得）』を禁止しますが、インデックス登録を完全に防ぐものではありません。" },
  { id: "q003", tags: ["Canonical"], q: "rel=canonical の役割として正しいのは？", choices: ["強制的な命令", "正規URLを示すヒント", "noindexと同じ", "301と同じ"], ans: 1, exp: "canonicalは検索エンジンに対して『これが正規版です』と伝える強力なヒントですが、強制命令ではありません。" },
  { id: "q004", tags: ["Sitemap"], q: "XMLサイトマップの主な役割は？", choices: ["インデックスを保証する", "発見とクロールの手助け", "ランキング要因", "重複の削除"], ans: 1, exp: "サイトマップは、クローラーにページの存在と更新を伝える『地図』です。" },
  { id: "q005", tags: ["Status"], q: "HTTPステータス 404 の意味は？", choices: ["恒久的な移動", "サーバーエラー", "見つからない(Not Found)", "アクセス禁止"], ans: 2, exp: "404はリソースが存在しないことを示します。" },
  { id: "q006", tags: ["Redirect"], q: "301 リダイレクトの意味は？", choices: ["一時的な転送", "恒久的な転送", "クロール拒否", "アクセス許可"], ans: 1, exp: "サイト移転やURL変更時は、評価を引き継ぐために301（恒久移動）を使います。" },
  { id: "q007", tags: ["Redirect"], q: "302 リダイレクトの用途
